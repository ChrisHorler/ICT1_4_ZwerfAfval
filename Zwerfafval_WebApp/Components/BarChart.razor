@using System.Globalization
@using MudBlazor
@using System.Linq	
@using Zwerfafval_WebApp.Components
@inject IJSRuntime JSRuntime


<MudPaper Class="d-flex justify-center" Style="height: 500px; width: 100%">
    <MudChart @ref="MudChartRef" ChartType="ChartType.Bar">
        <MudChartData>
            <MudChartDataset Data="chartData" Label="Confidence">
                <MudChartDatasetOptions Fill="true" BorderColor="rgb(75, 192, 192)" BackgroundColor="rgba(75, 192, 192, 0.2)" />
            </MudChartDataset>
        </MudChartData>
    </MudChart>
</MudPaper>

@code {
    // Receiving data from Overview.razor
    [Parameter] public List<DetectionData> Data { get; set; }
    
    private MudChart MudChartRef;
    private List<ChartData> chartData = new List<ChartData>();

    protected override void OnInitialized()
    {
        // Map the DetectionData to ChartData for the MudBlazor chart
        if (Data != null)
        {
            chartData = Data.Select(item => new ChartData
            {
                Label = item.Type,          // Using 'Type' for the label (e.g., blikje, peuk)
                Value = item.Confidence     // Using 'Confidence' for the chart's value
            }).ToList();
        }

        base.OnInitialized();
    }

    public class ChartData
    {
        public string Label { get; set; }
        public double Value { get; set; }
    }
}
